let l=[],i=0;const f=4;let o=r=>{let u=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},lc:0,listen(t){return e.lc=u.push(t),()=>{for(let s=i+f;s<l.length;)l[s]===t?l.splice(s,f):s+=f;let n=u.indexOf(t);~n&&(u.splice(n,1),--e.lc||e.off())}},notify(t,n){let s=!l.length;for(let c of u)l.push(c,e.value,t,n);if(s){for(i=0;i<l.length;i+=f)l[i](l[i+1],l[i+2],l[i+3]);l.length=0}},off(){},set(t){let n=e.value;n!==t&&(e.value=t,e.notify(n))},subscribe(t){let n=e.listen(t);return t(e.value),n},value:r};return e};const a=o({value:""}),v=o([]),E=o([]),d={select:a,aside:v,main:E};export{d as L};
